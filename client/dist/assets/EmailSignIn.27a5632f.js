import{a as e,e as t,u as a,j as r,N as i,C as s,B as n,X as o,g as l,$ as c,T as d,a3 as u,a5 as m,ae as x,q as h,F as p,af as f}from"./vendor.17cb6192.js";import{u as y}from"./index.5c90ee8a.js";import"./firebase.99e0e815.js";function b(){const{currentUser:b,signInWithEmail:g}=y(),[j,v]=e.useState(""),[S,W]=e.useState(!1),[w,P]=e.useState(""),[k,E]=e.useState(""),$=t(),A=a();if(b)return r.jsx(i,{to:"/dashboard"});return r.jsx(s,{maxWidth:"sm",children:r.jsx(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mt:8},children:r.jsxs(o,{elevation:2,sx:{p:4,borderRadius:2,width:"100%",background:`linear-gradient(to bottom right, ${l($.palette.background.paper,.9)}, ${l($.palette.background.paper,.95)})`,backdropFilter:"blur(20px)",border:`1px solid ${l($.palette.primary.main,.1)}`},children:[r.jsxs(n,{sx:{textAlign:"center",mb:3},children:[r.jsx(c,{sx:{fontSize:48,mb:2,color:$.palette.primary.main}}),r.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Sign In with Email"}),r.jsx(d,{variant:"body1",color:"text.secondary",children:"Enter your Shopify store email to continue"})]}),w&&r.jsx(u,{severity:"error",sx:{mb:3},children:w}),k&&r.jsx(u,{severity:"success",sx:{mb:3},children:k}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),j&&j.includes("@")){W(!0),P(""),E("");try{if("function"!=typeof g)throw new Error("Sign in functionality is currently unavailable. Please try again later.");const e=await g(j);e.success?(E(`Welcome back! Account found for ${j}. Redirecting to dashboard...`),setTimeout((()=>{A("/dashboard")}),1500)):P(e.message||"No Shopify account found with this email")}catch(t){P(t.message||"Failed to sign in. Please try again later.")}finally{W(!1)}}else P("Please enter a valid email address")},children:[r.jsx(m,{type:"email",variant:"outlined",label:"Email Address",fullWidth:!0,required:!0,value:j,onChange:e=>v(e.target.value),disabled:S,sx:{mb:3},InputProps:{startAdornment:r.jsx(x,{color:"action",sx:{mr:1}})}}),r.jsx(h,{type:"submit",variant:"contained",color:"primary",size:"large",fullWidth:!0,disabled:S,sx:{py:1.5,mb:2,fontWeight:"bold",position:"relative"},children:S?r.jsx(p,{size:24,color:"inherit",sx:{position:"absolute"}}):"Continue"}),r.jsxs(d,{variant:"body2",color:"text.secondary",align:"center",children:["By continuing, you agree to our"," ",r.jsx(f,{href:"#",color:"primary",children:"Terms of Service"})," ","and"," ",r.jsx(f,{href:"#",color:"primary",children:"Privacy Policy"})]})]})]})})})}export{b as default};
